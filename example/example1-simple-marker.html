<!DOCTYPE html>
<html>

<head>
    <title>Drift-Free Label Marker Example</title>
    <style>
        /* Essential: Always set the map height explicitly */
        #map {
            height: 600px;
            width: 100%;
            background-color: #eee;
        }

        body {
            font-family: sans-serif;
            margin: 20px;
        }

        /* Your custom label styles */
        .label-container {
            font-weight: bold;
            border-radius: 4px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            white-space: nowrap;
        }
    </style>

    <script type="importmap">
{
    "imports": {
        "@johnson361/advanced-label-marker": "./../index.js"
    }
}
</script>

    <script async src="https://maps.googleapis.com/maps/api/js?libraries=marker&v=weekly"></script>
</head>

<body>

    <h2>@johnson361/advanced-label-marker</h2>
    <div id="map"></div>

    <script type="module">
        import AdvancedLabelMarker from '@johnson361/advanced-label-marker';

        async function initMap() {
            // This line WAITS until the 'maps' and 'marker' libraries are ready
            const { Map } = await google.maps.importLibrary("maps");
            const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

            const map = new Map(document.getElementById("map"), {
                zoom: 12,
                center: { lat: 40.7128, lng: -74.0060 },
                mapId: "DEMO_MAP_ID",
            });

            // Now that we've awaited the libraries, 'google' is guaranteed to exist
            const labelMarker = new AdvancedLabelMarker({
                map: map,
                position: { lat: 40.7128, lng: -74.0060 },
                labelContent: '<div>New York</div>'
            });
        }

        initMap();
    </script>
</body>

</html>