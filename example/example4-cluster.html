<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AdvancedLabelMarker | Custom Icon Image</title>

  <script type="importmap">
    {
        "imports": {
            "@johnson361/advanced-label-marker": "../../advanced-label-marker/index.js"
        }
    }
    </script>

  <style>
    :root {
      --primary: #27ae60;
      --slate-900: #0f172a;
      --slate-800: #1e293b;
      --slate-100: #f1f5f9;
    }

    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: var(--slate-100);
      color: var(--slate-900);
    }

    header {
      background: linear-gradient(135deg, var(--slate-900) 0%, var(--slate-800) 100%);
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .brand h1 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 700;
    }

    .brand span {
      font-size: 0.8rem;
      color: var(--primary);
      font-family: monospace;
    }

    .container {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .info-card {
      background: white;
      padding: 1.5rem;
      border-radius: 0.75rem;
      margin-bottom: 2rem;
      border-left: 4px solid var(--primary);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .info-card p {
      margin: 0;
      line-height: 1.6;
      color: #475569;
    }

    #map-wrapper {
      background: white;
      padding: 0.5rem;
      border-radius: 1rem;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      border: 1px solid #e2e8f0;
    }

    #map {
      height: 600px;
      width: 100%;
      border-radius: 0.5rem;
    }

    /* Style for the custom icon element */
    .custom-marker-icon {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      object-fit: cover;
      transition: transform 0.2s ease;
    }

    .custom-marker-icon:hover {
      transform: scale(1.1);
    }
  </style>
</head>

<body>

  <header>
    <div class="brand">
      <h1>AdvancedLabelMarker</h1>
      <span>v3.1.0 â€¢ Developed by Nallori Robert Johnson</span>
    </div>
  </header>

  <div class="container">
    <div class="info-card">
      <p><strong>Clustering Compatible:</strong>Fully optimized for the modern @googlemaps/markerclusterer library.</p>
    </div>

    <div id="map-wrapper">
      <div id="map"></div>
    </div>
  </div>

  <script src="https://maps.googleapis.com/maps/api/js?key=&libraries=marker"></script>

  <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>

  <script type="module">
    import AdvancedLabelMarker from '@johnson361/advanced-label-marker';

    async function init() {
      if (typeof google === 'undefined') return;
      const { Map } = await google.maps.importLibrary("maps");

      const map = new Map(document.getElementById("map"), {
        zoom: 6,
        center: { lat: 40.7128, lng: -74.0060 },
        mapId: "DEMO_MAP_ID",
      });

      const locations = [
        { lat: 40.7128, lng: -74.0060, color: 'red' },
        { lat: 40.7300, lng: -74.0100, color: 'green' },
        { lat: 40.7000, lng: -73.9900, color: 'blue' }
      ];

      const markers = locations.map(loc => {
        const img = document.createElement('img');
        // Using the official Google pin URLs
        img.src = `https://maps.google.com/mapfiles/ms/icons/${loc.color}-dot.png`;
        img.className = 'pin-icon';

        const labelMarker = new AdvancedLabelMarker({
          map: map,
          position: { lat: loc.lat, lng: loc.lng },
          iconHtml: img
        });

        return labelMarker.marker;
      });

      new markerClusterer.MarkerClusterer({ map, markers });
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>

</html>